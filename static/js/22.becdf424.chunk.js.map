{"version":3,"sources":["route/manager/RestaurantCreate.js"],"names":["RestaurantCreate","useState","restaurantName","restaurantNameUpdate","description","descriptionUpdate","error","errorSet","history","useHistory","imageRef","useRef","event","a","preventDefault","formData","FormData","console","log","image","current","files","length","append","apiFetcher","url","Auth","currentUser","uid","option","method","body","message","push","className","ManagerStyle","form","onSubmit","encType","type","placeholder","value","onChange","target","required","rows","maxLength","ref","accept","name"],"mappings":"yMAgFeA,UA1Ef,WAA6B,IAAD,EACqBC,mBAAS,IAD9B,mBACnBC,EADmB,KACHC,EADG,OAEeF,mBAAS,IAFxB,mBAEnBG,EAFmB,KAENC,EAFM,OAGAJ,mBAAS,IAHT,mBAGnBK,EAHmB,KAGZC,EAHY,KAIpBC,EAAUC,cACVC,EAAWC,mBALS,4CAe1B,WAA8BC,GAA9B,iBAAAC,EAAA,6DACED,EAAME,iBAEAC,EAAW,IAAIC,SACrBC,QAAQC,IAAI,CAAEC,MAAOT,EAASU,QAAQC,SAClC,UAAAX,EAASU,QAAQC,aAAjB,eAAwBC,QAAS,GACnCP,EAASQ,OAAO,QAASb,EAASU,QAAQC,MAAM,IANpD,SAQqBG,YAAW,CAC5BC,IAAI,uCAAD,OAAyCvB,EAAzC,qBAAoEwB,IAAKC,YAAYC,IAArF,iBAAiGxB,GACpGyB,OAAQ,CAAEC,OAAQ,OAAQC,KAAMhB,KAVpC,OAauB,YAbvB,OAaWiB,QACPxB,EAAQyB,KAAK,iBAEb1B,EAAS,qLAhBb,4CAf0B,sBAmC1B,OACE,6BACE,6BACE,oHAEF,+BACE,0BACE2B,UAAWC,IAAaC,KACxBC,SA3CkB,4CA4ClBP,OAAO,OACPQ,QAAQ,uBAJV,iFAOE,2BACEC,KAAK,OACLC,YAAY,iFACZC,MAAOvC,EACPwC,SA7CV,YAAuC,IAAXC,EAAU,EAAVA,OAC1BxC,EAAqBwC,EAAOF,QA6CpBG,UAAU,IAZd,6FAeE,8BACEL,KAAK,OACLC,YAAY,6FACZC,MAAOrC,EACPsC,SAjDV,YAA8C,IAAXC,EAAU,EAAVA,OACjCtC,EAAkBsC,EAAOF,QAiDjBG,UAAU,EACVC,KAAM,EACNC,UAAW,MAEb,2BAAOC,IAAKrC,EAAU6B,KAAK,OAAOS,OAAO,UAAUC,KAAK,UACxD,0BAAMf,UAAWC,IAAa7B,OAAQA,GACtC,2BAAOiC,KAAK,SAASE,MAAM","file":"static/js/22.becdf424.chunk.js","sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { Auth } from \"../../utils/firebase\";\nimport apiFetcher from \"../../utils/apiFetcher\";\nimport ManagerStyle from \"./Manager.module.css\";\nimport { useHistory } from \"react-router-dom\";\n\nfunction RestaurantCreate() {\n  const [restaurantName, restaurantNameUpdate] = useState(\"\");\n  const [description, descriptionUpdate] = useState(\"\");\n  const [error, errorSet] = useState(\"\");\n  const history = useHistory();\n  const imageRef = useRef();\n\n  function handleNameChange({ target }) {\n    restaurantNameUpdate(target.value);\n  }\n\n  function handleDescriptionChange({ target }) {\n    descriptionUpdate(target.value);\n  }\n\n  async function handleCreation(event) {\n    event.preventDefault();\n\n    const formData = new FormData();\n    console.log({ image: imageRef.current.files });\n    if (imageRef.current.files?.length > 0)\n      formData.append(\"image\", imageRef.current.files[0]);\n\n    const json = await apiFetcher({\n      url: `/manager/restaurant/insert.php?name=${restaurantName}&user_uid=${Auth.currentUser.uid}&info=${description}`,\n      option: { method: \"POST\", body: formData },\n    });\n\n    if (json.message === \"success\") {\n      history.push(\"/manager/list\");\n    } else {\n      errorSet(<center>พบปัญหาในการสร้างร้านค้า</center>);\n    }\n  }\n\n  return (\n    <div>\n      <big>\n        <b>สร้างร้านอาหาร</b>\n      </big>\n      <small>\n        <form\n          className={ManagerStyle.form}\n          onSubmit={handleCreation}\n          method=\"POST\"\n          encType=\"multipart/form-data\"\n        >\n          ชื่อร้านอาหาร\n          <input\n            type=\"text\"\n            placeholder=\"ชื่อร้านอาหาร\"\n            value={restaurantName}\n            onChange={handleNameChange}\n            required={true}\n          />\n          คำอธิบายร้านค้า\n          <textarea\n            type=\"text\"\n            placeholder=\"คำอธิบายร้านค้า\"\n            value={description}\n            onChange={handleDescriptionChange}\n            required={true}\n            rows={4}\n            maxLength={150}\n          />\n          <input ref={imageRef} type=\"file\" accept=\"image/*\" name=\"image\" />\n          <span className={ManagerStyle.error}>{error}</span>\n          <input type=\"submit\" value=\"สร้างร้านอาหาร\" />\n        </form>\n      </small>\n    </div>\n  );\n}\n\nexport default RestaurantCreate;\n"],"sourceRoot":""}