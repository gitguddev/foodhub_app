(this.webpackJsonpfoodhub=this.webpackJsonpfoodhub||[]).push([[7],{110:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(24),n(0);var a=n(125),r=n.n(a),c=n(28),o="".concat(c.g,"://").concat(c.e,":").concat(c.f);function l(e){return e?r()(o,{query:{method:"manager",uid:e.uid}}):r()(o,{query:{method:"restaurant",authentication:window.localStorage.getItem("auth")}})}},122:function(e,t,n){e.exports=n.p+"static/media/Avatar.b15acc02.png"},124:function(e,t,n){"use strict";n.d(t,"e",(function(){return c})),n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return d}));var a=n(0),r=Object(a.lazy)((function(){return n.e(24).then(n.bind(null,199))})),c=Object(a.lazy)((function(){return n.e(22).then(n.bind(null,200))})),o=Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(23)]).then(n.bind(null,201))})),l=Object(a.lazy)((function(){return n.e(18).then(n.bind(null,248))})),u=Object(a.lazy)((function(){return Promise.all([n.e(9),n.e(19)]).then(n.bind(null,249))})),i=Object(a.lazy)((function(){return n.e(12).then(n.bind(null,253))})),m=Object(a.lazy)((function(){return n.e(20).then(n.bind(null,256))})),s=Object(a.lazy)((function(){return n.e(14).then(n.bind(null,257))})),d=Object(a.lazy)((function(){return Promise.all([n.e(2),n.e(13),n.e(21)]).then(n.bind(null,258))}))},155:function(e,t,n){"use strict";n.r(t),n.d(t,"Socket",(function(){return F})),n.d(t,"useWorker",(function(){return W}));var a=n(1),r=n(21),c=n(33),o=n(24),l=n(0),u=n.n(l),i=n(96),m=n.n(i),s=n(86),d=n(159),f=n.n(d),p=n(160),b=n.n(p),h=n(87),E=n(3),v=n(16),g=n(161),_=n.n(g),w=n(122),j=n.n(w),O=n(90);function I(e){var t=e.icon,n=e.title,a=e.to,r=e.exact,c=e.onClick;return u.a.createElement(v.c,{className:m.a.navmenuButton,to:a,activeClassName:m.a.navmenuSelected,exact:r,onClick:c},u.a.createElement("div",null,u.a.createElement(s.a,{icon:t})," ",n))}function k(){var e,t,n=W();if(window.localStorage.getItem("jwt"))e=n.name||"\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19",t=n.img||j.a;else{var a=O.a.currentUser;e=(null===a||void 0===a?void 0:a.displayName)||"\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19",t=(null===a||void 0===a?void 0:a.photoURL)?null===a||void 0===a?void 0:a.photoURL:j.a}return u.a.createElement("div",{className:m.a.userSection},u.a.createElement("img",{src:t,alt:"user"}),e)}function S(e){var t=e.setShow,n=e.show,a=e.menu,r=Object(E.g)();return u.a.createElement("div",{className:"".concat(m.a.navmenu," ").concat(n?m.a.slideIn:m.a.slideOut)},u.a.createElement("div",{onClick:function(){t(!1)},className:m.a.navmenuClose},u.a.createElement(s.a,{icon:h.z})," \u0e1b\u0e34\u0e14"),u.a.createElement(k,null),a,u.a.createElement("div",{className:m.a.navmenuButton,onClick:window.localStorage.getItem("jwt")?function(){window.localStorage.removeItem("jwt"),r.push("/"),window.location.reload()}:function(){return O.a.signOut()}},u.a.createElement(s.a,{icon:h.w})," \u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e23\u0e30\u0e1a\u0e1a"))}var y=function(e){var t=e.rightTitle,n=e.title,a=e.content,r=e.panel,c=Object(l.useState)(!(document.documentElement.clientWidth<800)||null),i=Object(o.a)(c,2),d=i[0],f=i[1];return u.a.createElement(u.a.Fragment,null,null!=d&&u.a.createElement(S,{setShow:f,show:d,menu:r}),u.a.createElement("div",{className:m.a.container},u.a.createElement("div",{className:m.a.navbar},u.a.createElement("div",null,u.a.createElement(s.a,{icon:h.b,onClick:function(){f(!0)}})," ",n),t),u.a.createElement("div",{className:m.a.content},u.a.createElement(l.Suspense,{fallback:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14"},a))))},x=n(25),C=n(165),M=n.n(C);var N=function(e){var t=e.children,n=e.modalData,a=e.onCloseEmit;return u.a.createElement("div",{style:{display:t||n?"flex":"none"},className:M.a.modalContainer},u.a.createElement("div",{className:M.a.modalBackground,onClick:a}),u.a.createElement("div",{className:M.a.modal},t||n))},P=n(36),z=n(124),D=n(110),R=n(34),A=n(17);function B(){var e=Object(c.a)(["\n  padding: 0 10px;\n  color: white;\n  background-color: ",";\n  display: inline-block;\n  border-radius: 3px;\n  margin-left: 10px;\n"]);return B=function(){return e},e}var F=Object(l.createContext)();function U(e){var t=e.user,n=W(),a=Object(E.i)(),r=Object(l.useState)(),c=Object(o.a)(r,2),i=c[0],m=c[1],s=Object(l.useState)(!1),d=Object(o.a)(s,2),f=d[0],p=d[1],b=Object(l.useState)(),h=Object(o.a)(b,2),v=h[0],g=h[1];return Object(l.useEffect)((function(){var e=Object(D.a)(t);return g(e),e.on("connect",(function(){return p(!0)})),e.on("disconnect",(function(){return p(!1)})),e.on("connect_error",(function(){return p(!1)})),function(){e.disconnect(),e.off("connect"),e.off("disconnect"),e.off("connect_error")}}),[t]),(null===n||void 0===n?void 0:n.restaurant_id)?u.a.createElement(F.Provider,{value:{socket:v,connected:f}},u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"".concat(a.path,"/restaurant/:restaurant_id"),component:X}),u.a.createElement(E.a,{to:"".concat(a.url,"/restaurant/").concat(n.restaurant_id)}))):!n&&f&&t?u.a.createElement(F.Provider,{value:{socket:v,connected:f}},u.a.createElement(N,{modalData:i,onCloseEmit:function(){return m()}}),u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"".concat(a.path,"/list"),component:q}),u.a.createElement(E.b,{path:"".concat(a.path,"/restaurant/:restaurant_id"),component:X}),u.a.createElement(E.a,{to:"".concat(a.url,"/list")}))):u.a.createElement(P.a,null)}function q(){var e=Object(E.i)();return u.a.createElement(y,{title:u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"".concat(e.path,"/create")},"\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23"),u.a.createElement(E.b,{path:e.path},"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23")),rightTitle:u.a.createElement(E.d,null,u.a.createElement(E.b,{exact:!0,path:e.path},u.a.createElement(v.b,{to:"".concat(e.url,"/create")},u.a.createElement(s.a,{icon:h.q})))),content:u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"".concat(e.path,"/create"),component:z.e}),u.a.createElement(E.b,{path:e.path,component:z.g})),panel:u.a.createElement(u.a.Fragment,null,u.a.createElement(I,{exact:!0,icon:h.x,to:e.url,title:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23"}),u.a.createElement(I,{icon:h.q,to:"".concat(e.url,"/create"),title:"\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23"}))})}var V=R.a.div(B(),(function(e){return e.alert?"red":"blue"})),L=new Audio(f.a),H=new Audio(b.a);function T(e){var t=Object(o.a)(e,2),n=t[0],a=t[1];n.play(),n.pause(),n.currentTime=0,a.play(),a.pause(),a.currentTime=0,document.body.removeEventListener("click",(function(){return T([L,H])})),document.body.removeEventListener("touchstart",(function(){return T([L,H])}))}function G(){var e,t=Object(E.h)().restaurant_id,n=Object(l.useContext)(F).socket,a=Object(A.a)({promiseFn:x.b,url:"/manager/order/select.php?restaurant_id=".concat(t,"&user_uid=").concat(O.a.currentUser.uid)}),r=a.data,c=a.error,o=a.reload,i=(null===r||void 0===r||null===(e=r.result)||void 0===e?void 0:e.filter((function(e){return parseInt(e.status)<2})).length)||0;return Object(l.useEffect)((function(){function e(e){e&&H.play(),o()}return n.on("updateNavbar",e),n.on("cancelNavbar",e),n.on("orderNavbar",(function(){return e(!0)})),function(){n.off("updateNavbar"),n.off("cancelNavbar"),n.off("orderNavbar")}}),[t,n,o]),c||("success"===(null===r||void 0===r?void 0:r.message)?u.a.createElement(V,{alert:i>0},i):u.a.createElement(V,null,"0"))}function J(){var e,t,n=Object(E.h)().restaurant_id,a=Object(l.useContext)(F).socket,r=Object(A.a)({promiseFn:x.b,url:"/manager/session/get.php?restaurant_id=".concat(n,"&user_uid=").concat(O.a.currentUser.uid)}),c=r.data,o=r.error,i=r.reload,m=r.cancel,s=r.isPending,d=(null===c||void 0===c||null===(e=c.result)||void 0===e?void 0:e.length)||0,f=(null===c||void 0===c||null===(t=c.result)||void 0===t?void 0:t.filter((function(e){return 1===parseInt(e.status)})).length)>0;return Object(l.useEffect)((function(){var e=setInterval((function(){return i()}),1e3);return a.on("checkBill",(function(){L.play(),s&&m(),i()})),function(){a.off("checkBill"),m(),clearInterval(e)}}),[n,m,i,d]),o||("success"===(null===c||void 0===c?void 0:c.message)?u.a.createElement(V,{alert:f},d):u.a.createElement(V,null,"0"))}function X(){var e=Object(E.i)(),t=Object(E.h)().restaurant_id,n=Object(l.useContext)(F).socket,a=W(),r=null===a||void 0===a?void 0:a.role;return Object(l.useEffect)((function(){return n.emit("join",t),function(){n.emit("leave",t)}}),[e,t,n]),"loading"===a?u.a.createElement(P.a,null):u.a.createElement(u.a.Fragment,null,u.a.createElement(y,{title:u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"".concat(e.path,"/database")},"\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"),u.a.createElement(E.b,{path:"".concat(e.path,"/session")},"\u0e40\u0e0b\u0e2a\u0e0a\u0e31\u0e48\u0e19"),u.a.createElement(E.b,{path:"".concat(e.path,"/report")},"\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19"),u.a.createElement(E.b,{path:"".concat(e.path,"/queue")},"\u0e04\u0e34\u0e27\u0e01\u0e32\u0e23\u0e2a\u0e31\u0e48\u0e07\u0e2d\u0e32\u0e2b\u0e32\u0e23")),content:u.a.createElement(E.d,null,(!a||2===r)&&u.a.createElement(E.b,{path:"".concat(e.path,"/database"),component:z.a}),(!a||2===r||0===r)&&u.a.createElement(E.b,{path:"".concat(e.path,"/session"),component:z.h}),(!a||2===r)&&u.a.createElement(E.b,{path:"".concat(e.path,"/report"),component:z.d}),(!a||2===r||1===r)&&u.a.createElement(E.b,{path:"".concat(e.path,"/queue"),component:z.c}),!a&&u.a.createElement(E.a,{to:"".concat(e.path,"/report")}),0===r&&u.a.createElement(E.a,{to:"".concat(e.path,"/session")}),1===r&&u.a.createElement(E.a,{to:"".concat(e.path,"/queue")}),2===r&&u.a.createElement(E.a,{to:"".concat(e.path,"/database")})),panel:u.a.createElement(u.a.Fragment,null,(!a||2===r)&&u.a.createElement(I,{icon:h.f,to:"".concat(e.url,"/database"),title:"\u0e08\u0e31\u0e14\u0e01\u0e32\u0e23\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25"}),(!a||0===r||2===r)&&u.a.createElement(I,{icon:h.c,to:"".concat(e.url,"/session"),title:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,"\u0e40\u0e0b\u0e2a\u0e0a\u0e31\u0e48\u0e19"),u.a.createElement(J,null))}),(!a||1===r||2===r)&&u.a.createElement(I,{icon:h.C,to:"".concat(e.url,"/queue"),title:u.a.createElement(u.a.Fragment,null,u.a.createElement("span",null,"\u0e04\u0e34\u0e27\u0e01\u0e32\u0e23\u0e2a\u0e31\u0e48\u0e07\u0e2d\u0e32\u0e2b\u0e32\u0e23"),u.a.createElement(G,null))}),(!a||2===r)&&u.a.createElement(I,{icon:h.h,to:"".concat(e.url,"/report"),title:"\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19"}),!a&&u.a.createElement(I,{icon:h.x,to:"/manager/list",title:"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e23\u0e49\u0e32\u0e19\u0e2d\u0e32\u0e2b\u0e32\u0e23"}))}))}function Y(){return Object(l.useEffect)((function(){O.b.start("#signInForm",O.c)})),u.a.createElement("div",null,u.a.createElement("div",{className:m.a.formHeader},u.a.createElement("img",{alt:"FoodHub icon",style:{objectFit:"cover"},src:_.a,width:"120px",height:"120px"}),u.a.createElement("br",null),u.a.createElement("big",null,"\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a FoodHub"),u.a.createElement("br",null),u.a.createElement("span",{style:{color:"#858585"}},"\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e0a\u0e48\u0e2d\u0e07\u0e17\u0e32\u0e07\u0e01\u0e32\u0e23\u0e40\u0e02\u0e49\u0e32\u0e2a\u0e39\u0e48\u0e23\u0e30\u0e1a\u0e1a\u0e14\u0e49\u0e32\u0e19\u0e25\u0e48\u0e32\u0e07")),u.a.createElement("div",{id:"signInForm"}))}function Z(e){var t=e.children,n=Object(r.a)(e,["children"]);return W()?u.a.createElement(E.b,n,u.a.createElement(U,{user:{uid:"worker"}})):u.a.createElement(E.b,Object.assign({},n,{render:function(){return O.a.currentUser?t:u.a.createElement(E.a,{to:"/manager/sign-in"})}}))}function K(){window.localStorage.removeItem("jwt"),window.location.href="/manager"}function Q(){var e=Object(E.h)().jwt;window.localStorage.setItem("jwt",e),window.location.href="/manager"}function W(){var e=Object(A.a)({promiseFn:x.b,url:"/manager/worker/check.php",option:{headers:{Accept:"application/json",Authorization:"Bearer "+window.localStorage.getItem("jwt")}}}),t=e.data,n=e.error;if(!window.localStorage.getItem("jwt"))return null;if(n)return n.message;if(null===t||void 0===t?void 0:t.message)switch(t.message){case"success":return Object(a.a)(Object(a.a)({},t.result),{},{role:parseInt(t.result.role)});default:return window.localStorage.removeItem("jwt"),t.message}return"loading"}document.body.addEventListener("click",(function(){return T([L,H])})),document.body.addEventListener("touchstart",(function(){return T([L,H])}));t.default=function(){var e=Object(l.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(E.i)();return Object(l.useEffect)((function(){if(!window.localStorage.getItem("jwt"))return O.a.onAuthStateChanged((function(e){return a(e)}))})),u.a.createElement(E.d,null,u.a.createElement(E.b,{path:"".concat(r.path,"/workerauth/:jwt"),component:Q}),u.a.createElement(E.b,{path:"".concat(r.path,"/workerout"),component:K}),u.a.createElement(E.b,{path:"".concat(r.path,"/sign-in"),render:function(){return n||window.localStorage.getItem("jwt")?u.a.createElement(E.a,{to:"/manager"}):u.a.createElement(Y,null)}}),u.a.createElement(Z,{path:"".concat(r.path)},u.a.createElement(U,{user:n})))}},159:function(e,t,n){e.exports=n.p+"static/media/checkBill.7cf4351a.mp3"},160:function(e,t,n){e.exports=n.p+"static/media/deskBell.9562d8f5.mp3"},161:function(e,t,n){e.exports=n.p+"static/media/icon.d22223ce.png"},165:function(e,t,n){e.exports={modalBackground:"modal_modalBackground__X0PIs",modalContainer:"modal_modalContainer__30NN9",modal:"modal_modal__1iVYO",modalSlideIn:"modal_modalSlideIn__3AqV3"}},90:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return c}));var a=n(162);n(163);window.firebase=a.a;var r,c,o;window.localStorage.getItem("jwt")?r={currentUser:{uid:"worker"}}:(a.a.initializeApp({apiKey:"AIzaSyC4Mni8wooOc8UXo_SUazQQi_02Z-YzBPI",authDomain:"foodhub-294508.firebaseapp.com"}),r=a.a.auth(),c={signInOptions:[a.a.auth.EmailAuthProvider.PROVIDER_ID,a.a.auth.FacebookAuthProvider.PROVIDER_ID,a.a.auth.TwitterAuthProvider.PROVIDER_ID,a.a.auth.GithubAuthProvider.PROVIDER_ID,a.a.auth.PhoneAuthProvider.PROVIDER_ID]},o=new window.firebaseui.auth.AuthUI(r))},96:function(e,t,n){e.exports={navbar:"Manager_navbar__1kaev",navmenu:"Manager_navmenu__3KZmy",navmenuButton:"Manager_navmenuButton__9la-m",slideIn:"Manager_slideIn__2lL-o",slideOut:"Manager_slideOut__-pRsR",navmenuClose:"Manager_navmenuClose__283t0",navmenuSelected:"Manager_navmenuSelected__3RgcJ",formHeader:"Manager_formHeader__3uz2D",userSection:"Manager_userSection__3f6gD",content:"Manager_content__cXVce",fadeIn:"Manager_fadeIn__287Of",restaurantBox:"Manager_restaurantBox__O496x",form:"Manager_form__4evxU",error:"Manager_error__3pRkc",success:"Manager_success__1cgwq",status:"Manager_status__3ZC77",danger:"Manager_danger__33jM3",database:"Manager_database__25Vip",title:"Manager_title__1SODI",container:"Manager_container__GGeYw"}}}]);
//# sourceMappingURL=7.9ab82ce4.chunk.js.map