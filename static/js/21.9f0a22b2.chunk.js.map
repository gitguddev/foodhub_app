{"version":3,"sources":["route/manager/Report.js"],"names":["monthList","ReportTable","styled","table","BillContainer","div","BillPaper","props","height","width","BillStyled","Button","button","blue","ButtonContainer","PageButton","disabled","Bill","sessions_id","restaurant_id","table_number","useParams","useAsync","promiseFn","apiFetcher","url","Auth","currentUser","uid","data","error","billRef","useRef","message","window","screen","BillPaperStyled","result","onClick","current","style","overflow","html2canvas","scrollHeight","backgroundColor","then","canvas","location","href","toDataURL","replace","icon","faSave","eachItem","key","map","name","quantity","total","CurrentDate","year","month","day","parseInt","ref","restaurant_name","marginBottom","length","marginTop","numeral","reduce","value","parseFloat","format","BillChart","filter","useState","chart","chartSet","chartCTX","useEffect","chartHolder","a","json","priceMapped","costMapped","datasets","label","forEach","cost","Chart","type","options","responsive","maintainAspectRatio","labels","destroy","Fetcher","position","id","Report","page","pageSet","Date","getFullYear","yearSet","filterSet","reload","setData","cancel","billView","billViewSet","pageChanger","count","pageTotal","totalSessions","total_sessions","Math","ceil","color","faChartBar","onChange","event","target","split","index","array","defaultChecked","faFileInvoiceDollar","faBackward","faForward","className","colSpan"],"mappings":"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","file":"static/js/21.9f0a22b2.chunk.js","sourcesContent":["import React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport { useAsync } from \"react-async\";\nimport { useParams } from \"react-router-dom\";\nimport apiFetcher from \"../../utils/apiFetcher\";\nimport { Auth } from \"../../utils/firebase\";\nimport Loader from \"../../utils/Loader\";\nimport styled from \"styled-components\";\nimport numeral from \"numeral\";\nimport html2canvas from \"html2canvas\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Chart from \"chart.js\";\n\nimport {\n  faBackward,\n    faChartBar,\n    faFileInvoiceDollar,\n  faForward,\n  faSave,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nconst monthList = [\n  \"มกราคม\",\n  \"กุมภาพันธ์\",\n  \"มีนาคม\",\n  \"เมษายน\",\n  \"พฤษภาคม\",\n  \"มิถุนายน\",\n  \"กรกฏาคม\",\n  \"สิงหาคม\",\n  \"กันยายน\",\n  \"ตุลาคม\",\n  \"พฤศจิกายน\",\n  \"ธันวาคม\",\n];\n\nconst ReportTable = styled.table`\n  th {\n    background-color: #232323;\n    color: white;\n    width: calc(100% / 4);\n  }\n  td {\n    border-bottom: 1px solid #232323;\n  }\n  td,\n  th {\n    padding: 10px;\n    text-align: center;\n  }\n  font-size: 0.8em;\n  border-collapse: collapse;\n  .info + tr {\n    overflow: hidden;\n    font-size: 0;\n    transition: all 0.3s;\n    background-color: #eee;\n  }\n  .info:hover {\n    background-color: #666;\n    color: white;\n    cursor: pointer;\n  }\n  .info:hover + tr {\n    transition: all 0.2s;\n    font-size: 0.8em;\n    background-color: #fff !important;\n  }\n\n  .viewed {\n    font-size: 1em !important;\n    background-color: #fff !important;\n  }\n`;\n\nconst BillContainer = styled.div`\n  background-color: #232323;\n  color: white;\n  padding: 15px;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst BillPaper = styled.div`\n  height: ${(props) => props.height}px;\n  width: ${(props) => props.width}px;\n  margin: 15px 0;\n  overflow: auto;\n  display: flex;\n  flex-direction: column;\n  padding: 3px;\n  align-items: center;\n  font-size: calc(0.5vw + 0.5vh + 7px);\n  background-color: white;\n  color: black;\n  border-radius: 4px;\n`;\n\nconst BillStyled = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  grid-auto-rows: min-content;\n  font-size: 0.8em;\n\n  margin-top: 20px;\n  width: 100%;\n  z-index: 1;\n  text-align: center;\n\n  span:nth-child(1),\n  span:nth-child(2),\n  span:nth-child(3) {\n    text-align: center !important;\n    font-weight: bold;\n  }\n`;\n\nconst Button = styled.button`\n  border: none;\n  border-radius: 3px;\n  background-color: ${(props) => (props.blue ? \"blue\" : \"green\")};\n  color: white;\n  padding: 5px 13px;\n  transition: all 0.3s;\n\n  &:hover {\n    background-color: ${(props) => (props.blue ? \"#000080\" : \"#002e00\")};\n    transition: all 0.3s;\n  }\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  & > * {\n    margin: 5px;\n  }\n`;\n\nconst PageButton = styled.button`\n  background-color: ${(props) => (props.disabled ? \"grey\" : \"white\")};\n  color: black;\n  padding: 4px 9px;\n  border-radius: 4px;\n  margin: 0px 10px 10px 0px;\n  align-self: flex-start;\n  transition: all 0.1s;\n\n  svg {\n    color: #555;\n  }\n\n  &:hover {\n    ${(props) =>\n      !props.disabled &&\n      `\n    background-color: #ccc;\n    cursor: pointer;\n    transition: all 0.1s;\n  `}\n  }\n`;\n\nfunction Bill({ sessions_id, table_number }) {\n  const { restaurant_id } = useParams();\n  const { data, error } = useAsync({\n    promiseFn: apiFetcher,\n    url: `/manager/bill/get.php?restaurant_id=${restaurant_id}&user_uid=${Auth.currentUser.uid}&sessions_id=${sessions_id}`,\n  });\n  const billRef = useRef(null);\n\n  function Save() {\n    billRef.current.style.overflow = \"visible\";\n    html2canvas(billRef.current, {\n      height: billRef.current.scrollHeight,\n      backgroundColor: \"#fff\",\n    }).then((canvas) => {\n      window.location.href = canvas\n        .toDataURL()\n        .replace(\"image/png\", \"image/octet-stream\");\n      billRef.current.style.overflow = \"auto\";\n    });\n  }\n\n  if (error) return error;\n  if (data?.message === \"success\") {\n    let width, height;\n    if (window.screen.width > window.screen.height) {\n      height = (window.screen.height / 100) * 80;\n      width = height * 1.4124 - height;\n    } else {\n      width = (window.screen.width / 100) * 80;\n      height = width * 1.4142;\n    }\n    return (\n      <BillContainer>\n        <BillPaperStyled billRef={billRef} width={width} data={data.result} />\n        <ButtonContainer>\n          <a onClick={Save}>\n            <Button blue>\n              <FontAwesomeIcon icon={faSave} /> บันทึก\n            </Button>\n          </a>\n        </ButtonContainer>\n      </BillContainer>\n    );\n  }\n  return <Loader />;\n}\n\nfunction BillPaperStyled({ billRef, width, height, data }) {\n  const eachItem = [\n    <Fragment key={\"head\"}>\n      <span>ชื่อรายการ</span>\n      <span>จำนวน</span>\n      <span>รวม</span>\n    </Fragment>,\n    ...data.map((map) => {\n      const { name, quantity, total } = map;\n\n      return (\n        <Fragment key={map.sessions_id}>\n          <span>{name}</span>\n          <span>{quantity}</span>\n          <span>{total}</span>\n        </Fragment>\n      );\n    }),\n  ];\n\n  function CurrentDate({ data }) {\n    const { year, month, day } = data;\n\n    return (\n      <span>\n        {day} {monthList[month]} {parseInt(year) + 543}\n      </span>\n    );\n  }\n\n  return (\n    <BillPaper ref={billRef} width={width} height={height}>\n      <span>\n        <u>\n          <big>\n            <big>{data[0].restaurant_name}</big>\n          </big>\n        </u>\n      </span>\n      <small style={{ marginBottom: 8 }}>โต๊ะที่ {data[0].table_number}</small>\n      <small>\n        วันที่ <CurrentDate data={data[0]} />\n      </small>\n      <small>ทั้งหมด {data.length} รายการ</small>\n      <BillStyled>{eachItem}</BillStyled>\n      <span style={{ marginTop: 25 }}>\n        รวมทั้งสิ้น{\" \"}\n        {numeral(\n          data.reduce((current, value) => {\n            return current + parseFloat(value.total);\n          }, 0)\n        ).format(\"0,0.00\")}{\" \"}\n        บาท\n      </span>\n    </BillPaper>\n  );\n}\n\nfunction BillChart({ filter, year }) {\n  const { restaurant_id } = useParams();\n  const [chart, chartSet] = useState();\n  const chartCTX = useRef();\n\n  useEffect(() => {\n    let chartHolder;\n    if (chart) chart.destroy();\n    async function Fetcher() {\n      const json = await apiFetcher({\n        url: `/manager/report/chart.php?restaurant_id=${restaurant_id}&user_uid=${Auth.currentUser.uid}&filter=${filter}&year=${year}`,\n      });\n\n\n      if (json.message === \"success\") {\n        const priceMapped = [];\n        const costMapped = [];\n        let datasets;\n\n        if (filter === \"income\") {\n          datasets = [\n            {\n              label: \"รายรับ\",\n              data: priceMapped,\n              backgroundColor: \"#500\",\n            },\n            {\n              label: \"กำไร (หักต้นทุน)\",\n              data: costMapped,\n              backgroundColor: \"#777\",\n            }];\n        } else {\n          datasets = [\n            {\n              label: \"จำนวนการใช้บริการ\",\n              data: priceMapped,\n              backgroundColor: \"#500\",\n            }\n          ];\n        }\n\n        json.result.forEach((map) => {\n          priceMapped[map.month] = map.total;\n          if (map.cost) costMapped[map.month] = map.cost;\n        });\n\n        chartHolder = new Chart(chartCTX.current, {\n          type: \"bar\",\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n          },\n          data: {\n            labels: monthList,\n            datasets\n          },\n        });\n        chartSet(chartHolder);\n      }\n    }\n    Fetcher();\n  }, [filter, restaurant_id, year]);\n\n  return <div style={{position: \"relative\"}}><canvas height={400} ref={chartCTX} id=\"chart\"></canvas></div>\n}\n\n//Way to complex should be extract as smaller component.\nfunction Report() {\n  const { restaurant_id } = useParams();\n  const [page, pageSet] = useState(0);\n  const [year, yearSet] = useState(new Date().getFullYear());\n  const [filter, filterSet] = useState(\"income\");\n  const { data, error, reload, setData, cancel } = useAsync({\n    promiseFn: apiFetcher,\n    url: `/manager/report/get.php?restaurant_id=${restaurant_id}&user_uid=${Auth.currentUser.uid}&page=${page}`,\n  });\n  const [billView, billViewSet] = useState(null);\n\n  function handleBillView(id) {\n    billViewSet(billView === id ? null : id);\n  }\n\n  useEffect(() => {\n    setData({ message: \"loading\" }, reload);\n    return cancel;\n  }, [cancel, page, reload, restaurant_id, setData]);\n\n  function pageChanger(count) {\n    pageSet(page + count <= 0 ? 0 : page + count);\n  }\n\n  function pageTotal() {\n    if (!(data.result?.length > 1)) return 0;\n    const totalSessions = data.result[0].total_sessions;\n    const totalPage = Math.ceil(totalSessions / 5);\n\n    return totalPage;\n  }\n\n  function filterChanged(event) {\n    filterSet(event.target.value);\n  }\n\n  function yearChange(event) {\n    yearSet(event.target.value);\n  }\n\n  if (error) return error;\n  if (data?.message === \"success\") {\n    if (data.result?.length > 0) {\n    return (\n      <>\n        <small>\n          <FontAwesomeIcon style={{color: \"#555\"}} icon={faChartBar} /> กราฟรายงานประจำปี{\" \"}\n          <select onChange={yearChange} value={(new Date().getFullYear()) + 543}>\n            {/* <option disabled>ปัจจุบัน {(new Date().getFullYear()) + 543}</option> */}\n            {data.result[0].year.split(\",\").filter((filter, index, array) => index !== array.length - 1).map((map, index) => <option key={map} value={map}>{parseInt(map) + 543}</option>)}\n          </select>\n          <small>\n            <form onChange={filterChanged}>\n              <label>\n                <input\n                  defaultChecked={true}\n                  type=\"radio\"\n                  name=\"filter\"\n                  value=\"income\"\n                />{\" \"}\n                ยอดรายได้\n              </label>\n              <label>\n                <input type=\"radio\" name=\"filter\" value=\"quantity\" />{\" \"}\n                จำนวนการใช้บริการ\n              </label>\n            </form>\n          </small>\n        </small>\n        <BillChart filter={filter} year={year} />\n        <br/>\n        <small>\n          <FontAwesomeIcon style={{color:\"#555\"}} icon={faFileInvoiceDollar} /> ประวัติการชำระ{\" \"}\n          <small>\n            หน้า {page + 1} จาก {pageTotal()}\n          </small>\n          <br />\n          <PageButton disabled={page <= 0} onClick={() => pageChanger(-1)}>\n            <FontAwesomeIcon icon={faBackward} /> ย้อนกลับ\n          </PageButton>\n          <PageButton\n            disabled={page + 1 >= pageTotal()}\n            onClick={() => pageChanger(1)}\n          >\n            <FontAwesomeIcon icon={faForward} /> ถัดไป\n          </PageButton>\n        </small>\n        <ReportTable>\n          <thead>\n            <tr>\n              <th>หมายเลขเซสชั่น</th>\n              <th>เลขที่โต๊ะ</th>\n              <th>จำนวนอาหาร</th>\n              <th>รวมสุทธิ</th>\n            </tr>\n          </thead>\n          <tbody>\n            {data.result?.length > 0 &&\n              data.result.map((map) => {\n                return (\n                  <Fragment key={map.id}>\n                    <tr\n                      className=\"info\"\n                      onClick={() => handleBillView(map.id)}\n                    >\n                      <td>{map.id}</td>\n                      <td>{map.table_number}</td>\n                      <td>{map.quantity}</td>\n                      <td>{numeral(map.total).format(\"0,0.00\")}</td>\n                    </tr>\n                    {billView === map.id ? (\n                      <tr className=\"viewed\">\n                        <td colSpan={4}>\n                          <Bill\n                            table_number={map.table_number}\n                            sessions_id={map.id}\n                          />\n                        </td>\n                      </tr>\n                    ) : (\n                      <tr>\n                        <td colSpan={4}>ตรวจสอบใบเสร็จ</td>\n                      </tr>\n                    )}\n                  </Fragment>\n                );\n              })}\n          </tbody>\n        </ReportTable>\n      </>\n    );\n    } else {\n      return \"ยังไม่เคยมำการชำระเงินภายในร้านนี้ !\";\n    }\n  }\n  return <Loader />;\n}\n\nexport default Report;\n"],"sourceRoot":""}